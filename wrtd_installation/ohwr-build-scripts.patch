diff --git a/patches/fmc-sw.diff b/patches/fmc-sw.diff
index 9a084e1..6e6539a 100644
--- a/patches/fmc-sw.diff
+++ b/patches/fmc-sw.diff
@@ -1,5 +1,25 @@
+diff --git a/drivers/fmc/fmc-core.c b/drivers/fmc/fmc-core.c
+index d2118e0..61fff4f 100644
+--- a/drivers/fmc/fmc-core.c
++++ b/drivers/fmc/fmc-core.c
+@@ -219,15 +219,11 @@ err_ida:
+  */
+ static void fmc_carrier_del_slot(struct fmc_slot *slot)
+ {
+-	int id;
+-
+ 	if (IS_ERR_OR_NULL(slot))
+ 		return;
+ 
+-	id = slot->dev.id;
+ 	fmc_slot_eeprom_del(slot);
+ 	device_unregister(&slot->dev);
+-	ida_simple_remove(&fmc_slot_ida, id);
+ }
+ 
+ /**
 diff --git a/drivers/fmc/fmc-eeprom.c b/drivers/fmc/fmc-eeprom.c
-index a000a0d..2bd2a6f 100644
+index a000a0d..c3aa905 100644
 --- a/drivers/fmc/fmc-eeprom.c
 +++ b/drivers/fmc/fmc-eeprom.c
 @@ -7,9 +7,14 @@
@@ -74,7 +94,7 @@ index a000a0d..2bd2a6f 100644
  }
  
  /**
-@@ -66,13 +83,41 @@ static void fmc_slot_eeprom_init_default(struct fmc_slot *slot,
+@@ -66,13 +83,44 @@ static void fmc_slot_eeprom_init_default(struct fmc_slot *slot,
  ssize_t fmc_slot_eeprom_read(struct fmc_slot *slot,
  			     void *buf, off_t offset, size_t count)
  {
@@ -85,21 +105,24 @@ index a000a0d..2bd2a6f 100644
 +	struct nvmem_device *nvmem;
 +	char *nvmem_name;
 +	/* 
-+	 * TODO Check if index can be anything else than zero and,
++	 * TODO Check if index can be anything else than 0 or 1 and,
 +	 * if yes, how to get the proper value.
 +	 */
-+	idx = 0;
 +	len = strlen(dev_name(&slot->eeprom->dev)) + 2;
 +	nvmem_name = kzalloc(len, GFP_KERNEL);
 +	if (nvmem_name) {
-+		snprintf(nvmem_name, len, "%s%d",
-+			 dev_name(&slot->eeprom->dev), idx);
-+		nvmem = nvmem_device_get(&slot->dev, nvmem_name);
-+		if (nvmem) {
-+			err = nvmem_device_read(nvmem, offset, count, buf);
++		for (idx = 0; idx <= 1; idx++) {
++			snprintf(nvmem_name, len, "%s%d",
++				 dev_name(&slot->eeprom->dev), idx);
++			nvmem = nvmem_device_get(&slot->dev, nvmem_name);
++			if (!IS_ERR(nvmem)) {
++				err = nvmem_device_read(nvmem, offset, count, buf);
 +#if KERNEL_VERSION(5, 1, 0) <= LINUX_VERSION_CODE
-+			nvmem_device_put(nvmem);
++				nvmem_device_put(nvmem);
 +#endif
++				break;
++			}
++			err = PTR_ERR(nvmem);
 +		}
 +		kfree(nvmem_name);
 +	}
@@ -117,7 +140,21 @@ index a000a0d..2bd2a6f 100644
  }
  EXPORT_SYMBOL(fmc_slot_eeprom_read);
  
-@@ -152,7 +197,9 @@ void fmc_slot_eeprom_del(struct fmc_slot *slot)
+@@ -108,8 +156,13 @@ static int __fmc_slot_eeprom_add(struct fmc_slot *slot,
+ 	}
+ 
+ 	info_l.addr = fmc_slot_i2c_address(info_l.addr, slot->ga);
++#if KERNEL_VERSION(5, 8, 0) <= LINUX_VERSION_CODE
++	slot->eeprom = i2c_new_client_device(slot->adapter, &info_l);
++	if (IS_ERR(slot->eeprom))
++#else
+ 	slot->eeprom = i2c_new_device(slot->adapter, &info_l);
+ 	if (!slot->eeprom)
++#endif
+ 		return -ENODEV;
+ 
+ 	err = sysfs_create_link(&slot->dev.kobj, &slot->eeprom->dev.kobj,
+@@ -152,7 +205,9 @@ void fmc_slot_eeprom_del(struct fmc_slot *slot)
  	sysfs_remove_link(&slot->dev.kobj, FRU_EEPROM_NAME);
  	i2c_unregister_device(slot->eeprom);
  	slot->eeprom = NULL;
@@ -127,7 +164,7 @@ index a000a0d..2bd2a6f 100644
  }
  
  /**
-@@ -197,19 +244,25 @@ int fmc_slot_eeprom_type_set(struct fmc_slot *slot, const char *type)
+@@ -197,19 +252,25 @@ int fmc_slot_eeprom_type_set(struct fmc_slot *slot, const char *type)
  
  
  	memset(&i2c_info, 0, sizeof(i2c_info));
@@ -156,7 +193,7 @@ index a000a0d..2bd2a6f 100644
  	slot->at24_data.byte_len = len;
  	slot->at24_data.page_size = 1; /* 1Byte page to play safe */
  	slot->at24_data.setup = fmc_slot_eeprom_setup;
-@@ -219,7 +272,15 @@ int fmc_slot_eeprom_type_set(struct fmc_slot *slot, const char *type)
+@@ -219,7 +280,15 @@ int fmc_slot_eeprom_type_set(struct fmc_slot *slot, const char *type)
  		i2c_info.type, i2c_info.addr,
  		slot->at24_data.byte_len, slot->at24_data.page_size,
  		slot->at24_data.flags);
@@ -173,7 +210,7 @@ index a000a0d..2bd2a6f 100644
  }
  EXPORT_SYMBOL(fmc_slot_eeprom_type_set);
 diff --git a/drivers/fmc/fru-parse.c b/drivers/fmc/fru-parse.c
-index 35a1380..2fd95eb 100644
+index 52b997c..2fd95eb 100644
 --- a/drivers/fmc/fru-parse.c
 +++ b/drivers/fmc/fru-parse.c
 @@ -5,12 +5,6 @@
diff --git a/patches/zio.diff b/patches/zio.diff
index f6c5570..f7e3c3a 100644
--- a/patches/zio.diff
+++ b/patches/zio.diff
@@ -47,6 +47,24 @@ index f1d7e4c..1dd88b4 100644
  
  	pr_info("zio-core had been loaded\n");
  	return 0;
+diff --git a/drivers/zio/devices/zio-fake-dtc.c b/drivers/zio/devices/zio-fake-dtc.c
+index ad1b9f6..629a152 100644
+--- a/drivers/zio/devices/zio-fake-dtc.c
++++ b/drivers/zio/devices/zio-fake-dtc.c
+@@ -34,8 +34,13 @@ static enum hrtimer_restart zdtc_fn(struct hrtimer *timer)
+ 	struct timespec ts;
+ 
+ 	getnstimeofday(&ts);
++#if KERNEL_VERSION(5, 6, 0) <= LINUX_VERSION_CODE
++	dev_dbg(&zdtc.cset->head.dev, "%s: %9lli.%09li\n", __func__,
++		ts.tv_sec, ts.tv_nsec);
++#else
+ 	dev_dbg(&zdtc.cset->head.dev, "%s: %9li.%09li\n", __func__,
+ 		ts.tv_sec, ts.tv_nsec);
++#endif
+ 	zio_trigger_data_done(zdtc.cset);
+ 	return HRTIMER_NORESTART;
+ }
 diff --git a/drivers/zio/devices/zio-loop.c b/drivers/zio/devices/zio-loop.c
 index 4edd97f..c88acda 100644
 --- a/drivers/zio/devices/zio-loop.c
@@ -84,3 +102,24 @@ index 42f292a..9f0ca40 100644
  	case 1:
  		ctrl->zio_alarms &= (~v1);
  		break;
+diff --git a/include/linux/zio.h b/include/linux/zio.h
+index 0650656..971a01d 100644
+--- a/include/linux/zio.h
++++ b/include/linux/zio.h
+@@ -23,9 +23,16 @@ extern const uint32_t zio_version;
+ #include <linux/list.h>
+ #include <linux/string.h>
+ #include <linux/spinlock.h>
++#include <linux/version.h>
+ 
+ #include <linux/zio-sysfs.h>
+ 
++#if KERNEL_VERSION(5, 6, 0) <= LINUX_VERSION_CODE
++#define timespec timespec64
++#define timespec_to_ktime(__z) timespec64_to_ktime(__z)
++#define getnstimeofday(__z) ktime_get_real_ts64(__z)
++#endif
++
+ #define ZIO_NR_MINORS  (1<<16) /* Ask for 64k minors: no harm done... */
+ 
+ /* Name the data structures */
diff --git a/scripts/adc_lib_build.sh b/scripts/adc_lib_build.sh
index 0105750..97d9066 100644
--- a/scripts/adc_lib_build.sh
+++ b/scripts/adc_lib_build.sh
@@ -16,6 +16,9 @@ export ZIO=$BUILD_DIR/zio
 export FMCADC100M=$BUILD_DIR/fmc-adc-100m14b4cha-sw
 [ $SKIP_BUILD ] || make
 [ $SKIP_INSTALL ] || sudo -E make install
+[ $SKIP_INSTALL ] || sudo -E install -m 0755 $BUILD_DIR/$PROJECT/lib/libadc.so /usr/local/lib
+[ $SKIP_INSTALL ] || sudo -E sh -c 'echo "/usr/local/lib" > /etc/ld.so.conf.d/adc.conf'
+[ $SKIP_INSTALL ] || sudo -E ldconfig
 [ $SKIP_INSTALL ] || sudo -E make -C lib/PyAdcLib install
 
 . $SCRIPT_DIR/post_script
diff --git a/scripts/mockturtle_build.sh b/scripts/mockturtle_build.sh
index f171eb5..06d4332 100644
--- a/scripts/mockturtle_build.sh
+++ b/scripts/mockturtle_build.sh
@@ -11,6 +11,7 @@ cd $BUILD_DIR
 [ -d $PROJECT ] || git clone https://ohwr.org/project/mock-turtle.git $PROJECT
 cd $PROJECT
 git checkout -B release v4.0.4
+[ $SKIP_PATCH ] || [ -e $PATCH_DIR/$PROJECT.diff ] && patch -p1 < $PATCH_DIR/$PROJECT.diff
 [ $SKIP_BUILD ] || WBGEN2=$BUILD_DIR/wishbone-gen/wbgen2 make -C software
 [ $SKIP_INSTALL ] || WBGEN2=$BUILD_DIR/wishbone-gen/wbgen2 sudo -E make -C software install
 [ $SKIP_INSTALL ] || sudo -E make -C software/lib/PyMockTurtle install
